<% content_for(:title) { "Exports - Page Migration" } %>

<div class="space-y-6">
  <h1 class="text-3xl font-bold text-wttj-black">Exports</h1>

  <div class="bg-white rounded-lg shadow-sm border border-wttj-gray-light">
    <% if @exports.any? %>
      <div class="divide-y divide-wttj-gray-light">
        <% @exports.each do |export| %>
          <%= link_to export_path(export[:id]), class: "block p-4 hover:bg-wttj-beige transition-colors" do %>
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <span class="font-mono text-sm bg-wttj-beige px-2 py-1 rounded border border-wttj-gray-light">
                  <%= export[:org_ref] %>
                </span>
                <div>
                  <span class="font-medium text-wttj-black"><%= export[:name] %></span>
                  <span class="text-sm text-wttj-gray-dark ml-2"><%= export[:file_count] %> files</span>
                </div>
                <% if export[:command] %>
                  <span class="text-xs bg-wttj-gray-light text-wttj-gray-dark px-2 py-0.5 rounded">
                    <%= export[:command] %> #<%= export[:command_run_id] %>
                  </span>
                <% end %>
              </div>
              <span class="text-sm text-wttj-gray-medium">
                <%= time_ago_in_words(export[:modified_at]) %> ago
              </span>
            </div>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <div class="p-8 text-center text-wttj-gray-dark">
        <p>No exports found</p>
        <p class="text-sm mt-2">Run the Extract command to create exports</p>
        <%= link_to "Run Extract", new_command_path(command: "extract"), class: "text-wttj-yellow hover:underline mt-2 inline-block" %>
      </div>
    <% end %>
  </div>
</div>
